<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manta-admin - Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        manta: {
                            primary: '#2E9F58',
                            dark: '#1A6E3B',
                            light: '#F4F7F9',
                            text: '#333333',
                            border: '#E5E7EB'
                        }
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        /* Custom scrollbar for table if needed */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        .animate-slide-in-right {
            animation: slideInRight 0.3s ease-out forwards;
        }
        /* Optimized Select Box */
        .custom-select {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
        }
    </style>
</head>
<body class="bg-gray-50 h-screen flex flex-col font-sans text-gray-800 overflow-hidden">

    <!-- Top Header (Full Width) -->
    <header class="bg-white shadow-sm h-16 flex items-center justify-between px-6 z-20 relative">
        <div class="flex items-center">
            <h1 class="text-2xl font-bold text-manta-primary mr-12">Manta-admin</h1>
            <div class="flex items-center gap-2 text-sm text-gray-500">
                <span class="hover:text-manta-primary cursor-pointer transition-colors">Manta-admin</span>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400"><path d="m9 18 6-6-6-6"></path></svg>
                <span id="page-title" class="text-gray-900 font-medium">Companies</span>
            </div>
            <button onclick="toggleSidebar()" class="text-gray-500 hover:text-gray-700 focus:outline-none lg:hidden mr-4 ml-4">
                <i class="fas fa-bars text-xl"></i>
            </button>
        </div>

    <!-- Drawer: Add Company -->
    <div id="addCompanyDrawer" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black bg-opacity-50 transition-opacity" onclick="closeDrawer('addCompanyDrawer')"></div>
        <div class="absolute right-0 top-0 h-full w-96 bg-white shadow-2xl transform transition-transform duration-300 translate-x-full flex flex-col" id="addCompanyDrawerContent">
            <div class="p-6 border-b border-gray-100 flex justify-between items-center">
                <h3 class="text-lg font-bold text-gray-900">Add Company</h3>
                <button onclick="closeDrawer('addCompanyDrawer')" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <div class="px-6 pt-4 pb-2">
                <div class="relative">
                    <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                    <input type="text" id="addCompanySearch" oninput="filterCompanyCandidates(this.value)" placeholder="Search companies..." class="w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:border-manta-primary transition-colors">
                </div>
            </div>
            <div class="flex-1 overflow-y-auto px-6 pb-6 pt-2" id="addCompanyList">
                <!-- Content injected by JS -->
            </div>
            <div class="p-6 border-t border-gray-100 flex justify-end gap-3 bg-gray-50">
                <button onclick="closeDrawer('addCompanyDrawer')" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-white transition-colors">Cancel</button>
                <button onclick="submitAddCompany()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-sm">Submit</button>
            </div>
        </div>
    </div>

    <!-- Modal: Edit Company (For Approved) -->
    <div id="deleteCompanyModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-white w-full max-w-md p-6 rounded-xl shadow-2xl animate-fade-in-up">
            <div class="text-center mb-6">
                <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-exclamation-triangle text-red-500 text-xl"></i>
                </div>
                <h3 class="text-lg font-bold text-gray-900">Remove Company</h3>
                <p class="text-sm text-gray-500 mt-2">Are you sure you want to remove this company from the current data access point?</p>
            </div>
            <div class="flex gap-4 justify-center">
                <button onclick="closeModal('deleteCompanyModal')" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors">Cancel</button>
                <button onclick="confirmDeleteCompany()" class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors shadow-sm">Confirm</button>
            </div>
        </div>
    </div>
    <div id="editCompanyModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex justify-end">
        <div class="bg-white w-full max-w-md h-full shadow-2xl p-8 flex flex-col animate-slide-in-right overflow-y-auto">
            <h2 class="text-xl font-bold text-gray-800 mb-8">Edit</h2>
            
            <form class="space-y-6 flex-1">
                <input type="hidden" id="edit-company-id">
                
                <!-- Company Info -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <span class="text-red-500 mr-1">*</span>Company Name
                    </label>
                    <input type="text" id="edit-company-name" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <span class="text-red-500 mr-1">*</span>Industry
                    </label>
                    <select id="edit-industry" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary bg-white custom-select">
                        <option value="Energy Retailer">Energy Retailer</option>
                        <option value="Commercial & Industrial">Commercial & Industrial</option>
                        <option value="Technology">Technology</option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <span class="text-red-500 mr-1">*</span>Nation
                    </label>
                    <select id="edit-nation" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary bg-white custom-select">
                        <option value="Australia">Australia</option>
                        <option value="UK">UK</option>
                        <option value="USA">USA</option>
                        <option value="New Zealand">New Zealand</option>
                        <option value="Germany">Germany</option>
                        <option value="Japan">Japan</option>
                        <option value="Norway">Norway</option>
                        <option value="Italy">Italy</option>
                        <option value="Portland">Portland</option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <span class="text-red-500 mr-1">*</span>ABN
                    </label>
                    <input type="text" id="edit-abn" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <span class="text-red-500 mr-1">*</span>Business Address
                    </label>
                    <input type="text" id="edit-address" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        Status
                    </label>
                    <div class="flex items-center space-x-4 mt-2">
                        <label class="flex items-center">
                            <input type="radio" name="edit-status" value="Active" class="text-manta-primary focus:ring-manta-primary h-4 w-4 border-gray-300">
                            <span class="ml-2 text-sm text-gray-700">Active</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="edit-status" value="Inactive" class="text-manta-primary focus:ring-manta-primary h-4 w-4 border-gray-300">
                            <span class="ml-2 text-sm text-gray-700">Inactive</span>
                        </label>
                    </div>
                </div>

            </form>

            <div class="flex justify-end space-x-4 mt-8 pt-4 border-t border-gray-100">
                <button type="button" onclick="closeModal('editCompanyModal')" class="px-6 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50 transition-colors">Cancel</button>
                <button type="button" onclick="submitEditCompany()" class="px-6 py-2 bg-manta-primary text-white rounded hover:bg-manta-dark transition-colors">Save</button>
            </div>
        </div>
    </div>
        <div class="relative">
            <button onclick="toggleUserMenu()" class="flex items-center space-x-3 focus:outline-none group">
                <span class="text-gray-600 text-sm group-hover:text-manta-primary transition-colors">Hello , Amber</span>
                <div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 group-hover:bg-manta-primary group-hover:text-white transition-all duration-300 shadow-sm">
                    <i class="fas fa-user"></i>
                </div>
                <i class="fas fa-chevron-down text-xs text-gray-400 group-hover:text-manta-primary transition-colors"></i>
            </button>
            <!-- Dropdown Menu -->
            <div id="userMenu" class="absolute right-0 mt-3 w-48 bg-white rounded-lg shadow-xl py-2 hidden z-50 border border-gray-100 transform origin-top-right transition-all duration-200">
                <div class="px-4 py-3 border-b border-gray-100 mb-1">
                    <p class="text-sm font-medium text-gray-900">Amber</p>
                    <p class="text-xs text-gray-500 truncate">admin@manta.com</p>
                </div>
                <a href="#" onclick="handleLogout()" class="block px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors flex items-center">
                    <i class="fas fa-sign-out-alt w-5 mr-2"></i>
                    Logout
                </a>

            </div>
        </div>
    </header>

    <!-- Main Layout Wrapper -->
    <div class="flex flex-1 overflow-hidden">
        
        <!-- Sidebar -->
        <aside class="w-64 bg-white shadow-md flex flex-col z-10 transition-all duration-300 border-r border-gray-100" id="sidebar">
            <nav class="flex-1 px-4 space-y-2 mt-6">
                <a href="#" onclick="switchView('companies')" id="nav-companies" class="flex items-center px-4 py-3 text-manta-primary bg-green-50 rounded-lg transition-colors group">
                    <i class="far fa-calendar-alt w-6 h-6 mr-3 text-lg"></i>
                    <span class="font-medium">Companies</span>
                </a>
                <a href="#" onclick="switchView('clients')" id="nav-clients" class="flex items-center px-4 py-3 text-gray-600 hover:bg-green-50 hover:text-manta-primary rounded-lg transition-colors group">
                    <i class="fas fa-users w-6 h-6 mr-3 text-lg group-hover:text-manta-primary"></i>
                    <span class="font-medium">Clients</span>
                </a>
                <a href="#" onclick="switchView('system-accounts')" id="nav-system-accounts" class="flex items-center px-4 py-3 text-gray-600 hover:bg-green-50 hover:text-manta-primary rounded-lg transition-colors group">
                    <i class="far fa-user w-6 h-6 mr-3 text-lg group-hover:text-manta-primary"></i>
                    <span class="font-medium">System Accounts</span>
                </a>
                <a href="#" onclick="switchView('data-access')" id="nav-data-access" class="flex items-center px-4 py-3 text-gray-600 hover:bg-green-50 hover:text-manta-primary rounded-lg transition-colors group">
                    <i class="fas fa-database w-6 h-6 mr-3 text-lg group-hover:text-manta-primary"></i>
                    <span class="font-medium">Data Platform</span>
                </a>
            </nav>
            <div class="p-4">
                <button onclick="toggleSidebar()" class="w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 text-gray-500 hover:bg-gray-200 ml-auto lg:hidden">
                   <i class="fas fa-chevron-left"></i>
                </button>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="flex-1 flex flex-col overflow-hidden bg-gray-50 relative">
            <!-- Page Title Moved to Header -->
            <div class="pt-6"></div>

            <div class="flex-1 overflow-auto px-8 pb-8 pt-2 relative">
                
                <!-- View: Companies -->
                <div id="view-companies" class="space-y-6">
                    
                    <!-- Search Filter Bar -->
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <div class="flex flex-col md:flex-row gap-6 items-end">
                            <div class="flex-1">
                                <label class="block text-xs font-medium text-gray-500 mb-1">Company Name</label>
                                <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary focus:ring-1 focus:ring-manta-primary transition-shadow">
                            </div>
                            <div class="flex-1">
                                <label class="block text-xs font-medium text-gray-500 mb-1">Industry</label>
                                 <select class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary bg-white focus:ring-1 focus:ring-manta-primary transition-shadow custom-select">
                                    <option></option>
                                    <option>Energy Retailer</option>
                                    <option>Commercial & Industrial</option>
                                </select>
                            </div>
                             <div class="flex-1">
                                <label class="block text-xs font-medium text-gray-500 mb-1">Nation</label>
                                <select class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary bg-white focus:ring-1 focus:ring-manta-primary transition-shadow custom-select">
                                    <option></option>
                                    <option>Australia</option>
                                    <option>Portland</option>
                                    <option>Italy</option>
                                    <option>Germany</option>
                                </select>
                            </div>
                            <div>
                                <button class="bg-manta-primary text-white px-8 py-2 rounded hover:bg-manta-dark transition-colors shadow-sm">Search</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Content Block -->
                    <div class="bg-white rounded-lg shadow-sm min-h-[500px] flex flex-col">
                        
                        <!-- Tabs & Pagination Row -->
                        <div class="mt-4 px-6 flex flex-col md:flex-row justify-between items-end border-b border-gray-200">
                            <!-- Tabs -->
                            <div class="flex space-x-1">
                                <button id="tab-approved" onclick="switchCompanyTab('approved')" class="px-6 py-3 text-sm font-medium text-gray-700 bg-gray-100 border-t border-l border-r border-gray-200 rounded-t-lg relative top-[1px] z-10">
                                    Approved
                                </button>
                                <button id="tab-awaiting" onclick="switchCompanyTab('awaiting')" class="px-6 py-3 text-sm font-medium text-gray-500 hover:text-gray-700 hover:bg-gray-50 rounded-t-lg relative">
                                    Awaiting Confirmation
                                    <span id="awaiting-badge" class="absolute top-2 right-2 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-[10px] text-white hidden">0</span>
                                </button>
                            </div>
                            
                            <!-- Pagination -->
                            <div class="flex items-center space-x-2 pb-2">
                                <button id="companies-action-btn" onclick="openModal('registrationEmailModal')" class="bg-manta-primary text-white px-4 py-2 rounded hover:bg-manta-dark transition-colors text-sm font-medium shadow-sm mr-4">
                                    Send Register Email
                                </button>
                                <span class="text-sm text-gray-500">Total <span id="total-count">0</span> items</span>
                                <div class="flex items-center space-x-1">
                                    <button onclick="changePage(-1)" class="p-1 rounded hover:bg-gray-100 text-gray-400 disabled:opacity-50" id="prev-page" disabled>
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <span class="text-sm text-gray-700 px-2" id="current-page">1</span>
                                    <button onclick="changePage(1)" class="p-1 rounded hover:bg-gray-100 text-gray-400 disabled:opacity-50" id="next-page">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                                <select class="text-sm border-gray-200 rounded-md text-gray-500 focus:ring-manta-primary focus:border-manta-primary custom-select pr-8 pl-2 py-1 bg-white" onchange="changePageSize(this.value)">
                                    <option value="5">5/page</option>
                                    <option value="10">10/page</option>
                                </select>
                            </div>
                        </div>

                        <!-- Table -->
                        <div class="flex-1 px-6 pb-6 overflow-hidden flex flex-col">
                            <div class="overflow-auto flex-1">
                                <table class="w-full text-sm text-left text-gray-600">
                                <thead class="bg-gray-100 text-gray-700 font-bold text-xs">
                                    <tr>
                                        <th class="px-6 py-3 whitespace-nowrap">Company Name</th>
                                        <th class="px-6 py-3 whitespace-nowrap">Industry</th>
                                        <th class="px-6 py-3 whitespace-nowrap">Country</th>
                                        <th class="px-6 py-3 whitespace-nowrap">Status</th>
                                        <th class="px-6 py-3 whitespace-nowrap">ABN/VAT</th>
                                        <th class="px-6 py-3 whitespace-nowrap">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="companies-table-body" class="divide-y divide-gray-100">
                                    <!-- Data injected by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

                <!-- View: Clients -->
                <div id="view-clients" class="space-y-6 hidden">
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <div class="flex flex-col md:flex-row gap-6 items-end">
                            <div class="flex-1">
                                <label class="block text-xs font-medium text-gray-500 mb-1">Email</label>
                                <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary">
                            </div>
                            <div class="flex-1">
                                <label class="block text-xs font-medium text-gray-500 mb-1">User Name</label>
                                <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary">
                            </div>
                             <div class="flex-1">
                                <label class="block text-xs font-medium text-gray-500 mb-1">Company</label>
                                <select class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary bg-white custom-select">
                                    <option></option>
                                </select>
                            </div>
                            <div>
                                <button class="bg-manta-primary text-white px-8 py-2 rounded hover:bg-manta-dark transition-colors">Search</button>
                            </div>
                        </div>
                    </div>

                    <!-- Main Content Card -->
                    <div class="bg-white rounded-lg shadow-sm overflow-hidden min-h-[400px] flex flex-col">
                        <!-- Top Controls -->
                        <div class="px-6 pt-6 pb-4 flex justify-between items-end">
                            <!-- Pagination -->
                            <div class="flex items-center space-x-2">
                                <span class="text-sm text-gray-500">Total <span id="cl-total-count">0</span> items</span>
                                <div class="flex items-center space-x-1">
                                    <button onclick="changeClientPage(-1)" class="p-1 rounded hover:bg-gray-100 text-gray-400 disabled:opacity-50" id="cl-prev-page" disabled>
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <span class="text-sm text-gray-700 px-2" id="cl-current-page">1</span>
                                    <button onclick="changeClientPage(1)" class="p-1 rounded hover:bg-gray-100 text-gray-400 disabled:opacity-50" id="cl-next-page">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-sm text-gray-500">Go to</span>
                                    <input type="text" value="1" class="w-12 h-8 border border-gray-200 text-center rounded text-sm focus:outline-none focus:border-manta-primary" id="cl-goto-page" onchange="goToClientPage(this.value)">
                                </div>
                            </div>

                            <button onclick="openNewClientModal()" class="bg-manta-primary text-white px-4 py-2 rounded hover:bg-manta-dark transition-colors text-sm font-medium shadow-sm">
                                New Client
                            </button>
                        </div>

                        <!-- Table -->
                        <div class="flex-1 px-6 pb-6 overflow-hidden flex flex-col">
                            <div class="overflow-auto flex-1">
                                <table class="w-full text-sm text-left text-gray-600">
                                <thead class="bg-gray-100 text-gray-700 font-bold text-xs">
                                    <tr>
                                        <th class="px-6 py-3 whitespace-nowrap">Owner</th>
                                        <th class="px-6 py-3 whitespace-nowrap">Email</th>
                                        <th class="px-6 py-3 whitespace-nowrap">Company</th>
                                        <th class="px-6 py-3 whitespace-nowrap">Mobile Phone</th>
                                        <th class="px-6 py-3 whitespace-nowrap">Status</th>
                                        <th class="px-6 py-3 whitespace-nowrap">Login Count</th>
                                        <th class="px-6 py-3 whitespace-nowrap">Last Login Time</th>
                                        <th class="px-6 py-3 whitespace-nowrap">Last Login IP</th>
                                        <th class="px-6 py-3 whitespace-nowrap">Current Login IP</th>
                                        <th class="px-6 py-3 whitespace-nowrap">Created</th>
                                        <th class="px-6 py-3 whitespace-nowrap">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="clients-table-body" class="divide-y divide-gray-200">
                                    <!-- Empty state -->
                                </tbody>
                            </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- View: System Accounts -->
                <div id="view-system-accounts" class="space-y-6 hidden">
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <div class="flex flex-col md:flex-row gap-6 items-end">
                            <div class="flex-1 w-full">
                                <label class="block text-xs font-medium text-gray-500 mb-1">Email</label>
                                <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary">
                            </div>
                            <div class="flex-1 w-full">
                                <label class="block text-xs font-medium text-gray-500 mb-1">Admin User</label>
                                <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary">
                            </div>
                            <div>
                                <button class="bg-manta-primary text-white px-8 py-2 rounded hover:bg-manta-dark transition-colors">Search</button>
                            </div>
                        </div>
                    </div>

                    <!-- Main Content Card -->
                    <div class="bg-white rounded-lg shadow-sm overflow-hidden min-h-[400px] flex flex-col">
                        <!-- Top Controls -->
                        <div class="px-6 pt-6 pb-4 flex justify-between items-end">
                            <!-- Pagination -->
                            <div class="flex items-center space-x-2">
                                <span class="text-sm text-gray-500">Total <span id="sa-total-count">12</span> items</span>
                                <div class="flex items-center space-x-1">
                                    <button onclick="changeSystemPage(-1)" class="p-1 rounded hover:bg-gray-100 text-gray-400 disabled:opacity-50" id="sa-prev-page" disabled>
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <span class="text-sm text-gray-700 px-2" id="sa-current-page">1</span>
                                    <button onclick="changeSystemPage(1)" class="p-1 rounded hover:bg-gray-100 text-gray-400 disabled:opacity-50" id="sa-next-page">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-sm text-gray-500">Go to</span>
                                    <input type="text" value="1" class="w-12 h-8 border border-gray-200 text-center rounded text-sm focus:outline-none focus:border-manta-primary" id="sa-goto-page" onchange="goToSystemPage(this.value)">
                                </div>
                            </div>

                            <button onclick="openNewAdminModal()" class="bg-manta-primary text-white px-4 py-2 rounded hover:bg-manta-dark transition-colors text-sm font-medium shadow-sm">
                                New Admin
                            </button>
                        </div>

                        <!-- Table -->
                        <div class="flex-1 px-6 pb-6 overflow-hidden flex flex-col">
                            <div class="overflow-auto flex-1">
                                <table class="w-full text-sm text-left text-gray-600">
                                <thead class="bg-gray-100 text-gray-700 font-bold text-xs">
                                    <tr>
                                        <th class="px-6 py-3 whitespace-nowrap">Admin User</th>
                                        <th class="px-6 py-3 whitespace-nowrap">Email</th>
                                        <th class="px-6 py-3 whitespace-nowrap">Status</th>
                                        <th class="px-6 py-3 whitespace-nowrap">Login Count</th>
                                        <th class="px-6 py-3 whitespace-nowrap">Last Login Time</th>
                                        <th class="px-6 py-3 whitespace-nowrap">Last Login IP</th>
                                        <th class="px-6 py-3 whitespace-nowrap">Current Login IP</th>
                                        <th class="px-6 py-3 whitespace-nowrap">Created</th>
                                        <th class="px-6 py-3 whitespace-nowrap">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="system-accounts-table-body" class="divide-y divide-gray-200">
                                    <!-- Data injected by JS -->
                                </tbody>
                            </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- View: Data Access -->
                <div id="view-data-access" class="flex-1 hidden h-full overflow-hidden">
                    <!-- Dynamic Content -->
                </div>

            </div>
        </main>
    </div>

    <!-- Modal: New/Edit Admin -->
    <div id="newAdminModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex justify-end">
        <div class="bg-white w-full max-w-md h-full shadow-2xl p-8 flex flex-col animate-slide-in-right overflow-y-auto">
            <h2 id="admin-modal-title" class="text-xl font-bold text-gray-800 mb-8">New Admin User</h2>
            
            <form class="space-y-6 flex-1">
                <input type="hidden" id="admin-id">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <span class="text-red-500 mr-1">*</span>Username
                    </label>
                    <input type="text" id="admin-username" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary">
                    <p id="admin-username-error" class="text-red-500 text-xs mt-1 hidden"></p>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <span class="text-red-500 mr-1">*</span>Email
                    </label>
                    <input type="email" id="admin-email" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary">
                    <p id="admin-email-error" class="text-red-500 text-xs mt-1 hidden"></p>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        Status
                    </label>
                    <div class="flex items-center space-x-4 mt-2">
                        <label class="flex items-center">
                            <input type="radio" name="admin-status" value="Active" class="text-manta-primary focus:ring-manta-primary h-4 w-4 border-gray-300" checked>
                            <span class="ml-2 text-sm text-gray-700">Active</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="admin-status" value="Inactive" class="text-manta-primary focus:ring-manta-primary h-4 w-4 border-gray-300">
                            <span class="ml-2 text-sm text-gray-700">Inactive</span>
                        </label>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <span class="text-red-500 mr-1">*</span>Password
                    </label>
                    <input type="password" id="admin-password" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary">
                    <p id="admin-password-error" class="text-red-500 text-xs mt-1 hidden"></p>
                </div>
                 <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <span class="text-red-500 mr-1">*</span>Confirmation Password
                    </label>
                    <input type="password" id="admin-confirm-password" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary">
                    <p id="admin-confirm-password-error" class="text-red-500 text-xs mt-1 hidden"></p>
                </div>
            </form>

            <div class="flex justify-end space-x-4 mt-8 pt-4 border-t border-gray-100">
                <button type="button" onclick="closeModal('newAdminModal')" class="px-6 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50 transition-colors">Cancel</button>
                <button type="button" onclick="submitAdminUser()" class="px-6 py-2 bg-manta-primary text-white rounded hover:bg-manta-dark transition-colors">Submit</button>
            </div>
        </div>
    </div>


    <!-- Modal: New/Edit Client -->
    <div id="newClientModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex justify-end">
        <div class="bg-white w-full max-w-md h-full shadow-2xl p-8 flex flex-col animate-slide-in-right overflow-y-auto">
            <h2 id="client-modal-title" class="text-xl font-bold text-gray-800 mb-8">New Client</h2>
            
            <form class="space-y-6 flex-1">
                <input type="hidden" id="client-id">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <span class="text-red-500 mr-1">*</span>User Name
                    </label>
                    <input type="text" id="client-username" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary">
                    <p id="client-username-error" class="text-red-500 text-xs mt-1 hidden"></p>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <span class="text-red-500 mr-1">*</span>Company
                    </label>
                    <select id="client-company" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary bg-white custom-select">
                        <!-- Options populated dynamically -->
                    </select>
                    <p id="client-company-error" class="text-red-500 text-xs mt-1 hidden"></p>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <span class="text-red-500 mr-1">*</span>Email
                    </label>
                    <input type="email" id="client-email" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary">
                    <p id="client-email-error" class="text-red-500 text-xs mt-1 hidden"></p>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        Mobile Phone Number
                    </label>
                    <input type="text" id="client-mobile" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        Status
                    </label>
                    <div class="flex items-center space-x-4 mt-2">
                        <label class="flex items-center">
                            <input type="radio" name="client-status" value="Active" class="text-manta-primary focus:ring-manta-primary h-4 w-4 border-gray-300" checked>
                            <span class="ml-2 text-sm text-gray-700">Active</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="client-status" value="Inactive" class="text-manta-primary focus:ring-manta-primary h-4 w-4 border-gray-300">
                            <span class="ml-2 text-sm text-gray-700">Inactive</span>
                        </label>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <span class="text-red-500 mr-1">*</span>Password
                    </label>
                    <input type="password" id="client-password" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary">
                    <p id="client-password-error" class="text-red-500 text-xs mt-1 hidden"></p>
                </div>
                 <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <span class="text-red-500 mr-1">*</span>Confirmation Password
                    </label>
                    <input type="password" id="client-confirm-password" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary">
                    <p id="client-confirm-password-error" class="text-red-500 text-xs mt-1 hidden"></p>
                </div>
            </form>

            <div class="flex justify-end space-x-4 mt-8 pt-4 border-t border-gray-100">
                <button type="button" onclick="closeModal('newClientModal')" class="px-6 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50 transition-colors">Cancel</button>
                <button type="button" onclick="submitClientUser()" class="px-6 py-2 bg-manta-primary text-white rounded hover:bg-manta-dark transition-colors">Submit</button>
            </div>
        </div>
    </div>

    <!-- Modal: Review Company -->
    <div id="reviewCompanyModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex justify-end">
        <div class="bg-white w-full max-w-md h-full shadow-2xl p-8 flex flex-col animate-slide-in-right overflow-y-auto">
            <h2 class="text-xl font-bold text-gray-800 mb-8">Edit</h2>
            
            <form class="space-y-6 flex-1">
                <input type="hidden" id="review-company-id">
                
                <!-- Company Info -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <span class="text-red-500 mr-1">*</span>Company Name
                    </label>
                    <input type="text" id="review-company-name" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <span class="text-red-500 mr-1">*</span>Industry
                    </label>
                    <select id="review-industry" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary bg-white custom-select">
                        <option value="Energy Retailer">Energy Retailer</option>
                        <option value="Commercial & Industrial">Commercial & Industrial</option>
                        <option value="Technology">Technology</option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <span class="text-red-500 mr-1">*</span>Nation
                    </label>
                    <select id="review-nation" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary bg-white custom-select">
                        <option value="Australia">Australia</option>
                        <option value="UK">UK</option>
                        <option value="USA">USA</option>
                        <option value="New Zealand">New Zealand</option>
                        <option value="Germany">Germany</option>
                        <option value="Japan">Japan</option>
                        <option value="Norway">Norway</option>
                        <option value="Italy">Italy</option>
                        <option value="Portland">Portland</option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <span class="text-red-500 mr-1">*</span>ABN
                    </label>
                    <input type="text" id="review-abn" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <span class="text-red-500 mr-1">*</span>Business Address
                    </label>
                    <input type="text" id="review-address" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        Status
                    </label>
                    <div class="flex items-center space-x-4 mt-2">
                        <label class="flex items-center">
                            <input type="radio" name="review-status" value="Active" class="text-manta-primary focus:ring-manta-primary h-4 w-4 border-gray-300" checked>
                            <span class="ml-2 text-sm text-gray-700">Active</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="review-status" value="Inactive" class="text-manta-primary focus:ring-manta-primary h-4 w-4 border-gray-300">
                            <span class="ml-2 text-sm text-gray-700">Inactive</span>
                        </label>
                    </div>
                </div>

                <hr class="border-gray-200 my-6">

                <!-- User Info -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <span class="text-red-500 mr-1">*</span>First Name
                    </label>
                    <input type="text" id="review-firstname" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <span class="text-red-500 mr-1">*</span>Last Name
                    </label>
                    <input type="text" id="review-lastname" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <span class="text-red-500 mr-1">*</span>Mobile Phone Number
                    </label>
                    <div class="flex">
                         <span class="inline-flex items-center px-3 rounded-l border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm">
                            +61
                        </span>
                        <input type="text" id="review-mobile" class="w-full px-3 py-2 border border-gray-300 rounded-r focus:outline-none focus:border-manta-primary">
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <span class="text-red-500 mr-1">*</span>Work Email
                    </label>
                    <input type="email" id="review-email" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary">
                </div>

            </form>

            <div class="flex justify-end space-x-4 mt-8 pt-4 border-t border-gray-100">
                <button type="button" onclick="closeModal('reviewCompanyModal')" class="px-6 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50 transition-colors">Cancel</button>
                <button type="button" onclick="approveCompany()" class="px-6 py-2 bg-manta-primary text-white rounded hover:bg-manta-dark transition-colors">Approve</button>
            </div>
        </div>
    </div>

    <!-- Modal: Registration Email -->
    <div id="registrationEmailModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex justify-end">
        <div class="bg-white w-full max-w-md h-full shadow-2xl p-8 flex flex-col animate-slide-in-right overflow-y-auto">
            <h2 class="text-xl font-bold text-gray-800 mb-4">Registration Email</h2>
            
            <p class="text-xs text-gray-500 mb-8 leading-relaxed">
                Please enter the email address that should receive the registration email. After you submit it, the system will automatically send an email containing the registration information. Please log in to the email account <a href="#" class="underline">support@manta.energy.com</a> to view the sent content and sending records.
            </p>

            <form class="space-y-6 flex-1">
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2">Email</label>
                    <input type="text" placeholder="Enter here" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-manta-primary">
                </div>
            </form>

            <div class="flex justify-end space-x-4 mt-8 pt-4 border-t border-gray-100">
                <button type="button" onclick="closeModal('registrationEmailModal')" class="px-6 py-2 border border-manta-primary text-manta-primary rounded hover:bg-green-50 transition-colors">Cancel</button>
                <button type="button" class="px-6 py-2 bg-manta-primary text-white rounded hover:bg-manta-dark transition-colors">Submit</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/data.js"></script>
    <script src="js/main.js"></script>
    
    <!-- Initialize to Companies View based on user request context (though main.js defaults to system-accounts, we might want to override or just let the user navigate) -->
    <!-- But actually, the user wants me to optimize the header and the Companies view. So I should probably set the default view to Companies for them to see the changes immediately? -->
    <!-- No, I'll stick to the default behavior but maybe add a small script to switch to companies if desired, or just let it be. -->
    <!-- Let's update main.js to default to 'companies' since that's what we are working on? No, keep it standard. -->
    <!-- However, the screenshot implies 'Companies' is active. I'll modify the default in main.js to 'companies' in a separate tool call if needed, or just let it be. -->
    <!-- Actually, I'll check main.js again. It defaults to 'system-accounts'. I should probably change it to 'companies' so the user sees their changes immediately. -->
    
    <script>
        // Override default view for this session to show changes immediately
        document.addEventListener('DOMContentLoaded', () => {
            switchView('companies');
        });
    </script>
</body>
</html> // Override default view for this session to show changes immediately
        document.addEventListener('DOMContentLoaded', () => {
            switchView('companies');
        });
    </script>
</body>
</html>